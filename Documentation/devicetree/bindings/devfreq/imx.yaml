# SPDX-License-Identifier: GPL-2.0
%YAML 1.2
---
$id: http://devicetree.org/schemas/devfreq/imx.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

title: Generic i.MX bus frequency device

maintainers:
  - Leonard Crestez <leonard.crestez@nxp.com>

description: |
  The i.MX SoC family has multiple buses for which clock frequency (and sometimes
  voltage) can be adjusted.

  Some of those buses expose register areas mentioned in the memory maps as GPV
  ("Global Programmers View") but not all. Access to this area might be denied for
  normal world.

  The buses are based on externally licensed IPs such as ARM NIC-301 and Arteris
  FlexNOC but DT bindings are specific to the integration of these bus
  interconnect IPs into imx SOCs.

properties:
  compatible:
    oneOf:
      - items:
        - enum:
          - fsl,imx8mn-nic
          - fsl,imx8mm-nic
          - fsl,imx8mq-nic
        - const: fsl,imx8m-nic
      - items:
        - enum:
          - fsl,imx8mn-noc
          - fsl,imx8mm-noc
          - fsl,imx8mq-noc
        - const: fsl,imx8m-noc

  reg:
    maxItems: 1

  clocks:
    maxItems: 1

  operating-points-v2: true

  devfreq:
    description: |
      Phandle to another devfreq device to match OPPs with by using the
      passive governor.
    $ref: "/schemas/types.yaml#/definitions/phandle"

required:
  - compatible
  - clocks

additionalProperties: false

examples:
  - |
    #include <dt-bindings/clock/imx8mm-clock.h>
    noc: noc@32700000 {
            compatible = "fsl,imx8mm-noc", "fsl,imx8m-noc";
            reg = <0x32700000 0x100000>;
            clocks = <&clk IMX8MM_CLK_NOC>;
            operating-points-v2 = <&noc_opp_table>;
    };
